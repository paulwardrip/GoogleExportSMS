var AutoLightBox=function(t){function o(){l=function(){return void 0===window.LightboxAutoControl?window.LightboxAutoControl=1:window.LightboxAutoControl++,window.LightboxAutoControl}()}function e(){s.style.height="1px",s.style.width="1px",a&&(s.style.height=window.innerHeight+"px",s.style.width=window.innerWidth+"px")}function i(t){if(t){t instanceof jQuery&&(t=t.get(0)),o(),n&&(n.classList.remove("lightbox-auto-control-"+(l-1)),s.classList.remove("lightbox-"+(l-1))),(n=t).classList?n.classList.add("lightbox-auto-control-"+l):n.class="lightbox-auto-control-"+l,s.classList?s.classList.add("lightbox-"+l):s.class="lightbox-"+l;var e=window.getComputedStyle(t).zIndex;e||(e=50,t.style.zIndex=e),s.style.zIndex=parseInt(e)-1}}var n,l,s=document.createElement("div"),d=!1,a=!1,c=function(){$?$(s).fadeTo(200,.5):s.style.opacity=.5,n.style.zIndex?s.style.zIndex=n.style.zIndex-1:(n.style.zIndex=100,s.style.zIndex=99),a=!0},r=function(){$?$(s).fadeTo(200,0):s.style.opacity=0,a=!1},u=function(){d||(document.body.appendChild(s),d=!0)},y=function(){document.body.removeChild(s),d=!1};s.style.position="fixed",s.style.backgroundColor="black",s.style.opacity=0,s.style.left=0,s.style.top=0,i(t),e(),u(),window.setInterval(function(){if(h){var t=document.querySelector(".lightbox-auto-control-"+l);if(t){var o=window.getComputedStyle(t);console.debug(o.display,o.visibility,o.opacity),"none"===o.display||"hidden"===o.visibility||0===o.opacity?a&&r():a||c()}}d&&e()},100);var h=!0;return{show:c,hide:r,attach:u,detach:y,parent:i,color:function(t){s.style.backgroundColor=t},automatic:h}};